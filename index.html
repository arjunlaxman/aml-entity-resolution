<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AML Neural Monitor | Advanced Detection System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            min-height: 100vh;
        }

        .header {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(71, 85, 105, 0.3);
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        h1 {
            font-size: 1.75rem;
            font-weight: 700;
            background: linear-gradient(to right, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 0.875rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        .run-btn {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-size: 1rem;
        }

        .run-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
        }

        .run-btn:active {
            transform: translateY(0);
        }

        .run-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #94a3b8;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .panel {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 1rem;
            padding: 1.5rem;
        }

        .panel-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .anomaly-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-height: 500px;
            overflow-y: auto;
        }

        .anomaly-card {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 0.75rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .anomaly-card:hover {
            background: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.5);
        }

        .anomaly-card.active {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2));
            border-color: #3b82f6;
        }

        .anomaly-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 0.5rem;
        }

        .anomaly-type {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .severity-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .severity-critical {
            background: #ef4444;
            color: white;
            animation: pulse 2s infinite;
        }

        .severity-high {
            background: #f97316;
            color: white;
        }

        .severity-medium {
            background: #eab308;
            color: black;
        }

        .anomaly-description {
            color: #94a3b8;
            font-size: 0.875rem;
            margin-bottom: 0.75rem;
        }

        .anomaly-footer {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
        }

        .amount {
            color: #10b981;
            font-weight: 600;
        }

        .risk-score {
            color: #ef4444;
            font-weight: 600;
        }

        .detail-section {
            margin-bottom: 1.5rem;
        }

        .detail-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #e2e8f0;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .metric-card {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 0.75rem;
            padding: 1rem;
            text-align: center;
        }

        .metric-label {
            font-size: 0.75rem;
            color: #94a3b8;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .indicator-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .indicator {
            background: rgba(15, 23, 42, 0.5);
            border-left: 3px solid #fbbf24;
            padding: 0.75rem;
            border-radius: 0.25rem;
            font-size: 0.9rem;
            color: #cbd5e1;
        }

        .export-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 1rem;
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
        }

        .loading {
            text-align: center;
            padding: 3rem;
            font-size: 1.25rem;
            color: #64748b;
        }

        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(59, 130, 246, 0.1);
            border-top-color: #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.5);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #3b82f6, #8b5cf6);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">üõ°Ô∏è</div>
                <div>
                    <h1>AML Neural Monitor</h1>
                    <div class="subtitle">Graph Neural Network Detection System v3.2.1</div>
                </div>
            </div>
            <button id="runBtn" class="run-btn" onclick="runAnalysis()">
                üîç Run Analysis
            </button>
        </div>
    </div>

    <div class="container">
        <div class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <div class="stat-value" style="background: linear-gradient(to right, #3b82f6, #06b6d4); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                    <span id="transactionCount">0</span>
                </div>
                <div class="stat-label">Transactions Analyzed</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" style="background: linear-gradient(to right, #ef4444, #f97316); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                    <span id="anomalyCount">0</span>
                </div>
                <div class="stat-label">Anomalies Detected</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" style="background: linear-gradient(to right, #8b5cf6, #ec4899); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                    <span id="entityCount">0</span>
                </div>
                <div class="stat-label">Entities Monitored</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" style="background: linear-gradient(to right, #f59e0b, #ef4444); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                    <span id="riskLevel">LOW</span>
                </div>
                <div class="stat-label">Overall Risk Level</div>
            </div>
        </div>

        <div class="main-grid">
            <div class="panel">
                <h2 class="panel-title">
                    ‚ö†Ô∏è Detected Anomalies
                </h2>
                <div class="anomaly-list" id="anomalyList">
                    <div class="loading">
                        <div class="spinner"></div>
                        <div>Initializing detection engine...</div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div id="detailsPanel">
                    <div class="loading">
                        <div class="spinner"></div>
                        <div>Select an anomaly to view details</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data structures
        let anomalies = [];
        let selectedAnomaly = null;
        let transactionGraph = null;

        // Generate mock data
        function generateData() {
            const entities = [
                { id: 'E1', name: 'Account_Alpha', type: 'personal', risk: 0.22 },
                { id: 'E2', name: 'ShellCo_Beta', type: 'shell', risk: 0.89 },
                { id: 'E3', name: 'Account_Gamma', type: 'personal', risk: 0.31 },
                { id: 'E4', name: 'OffshoreHolding_Delta', type: 'shell', risk: 0.94 },
                { id: 'E5', name: 'Account_Epsilon', type: 'personal', risk: 0.15 },
                { id: 'E6', name: 'TradingCo_Zeta', type: 'business', risk: 0.48 },
                { id: 'E7', name: 'Account_Theta', type: 'personal', risk: 0.76 },
                { id: 'E8', name: 'CryptoExchange_Iota', type: 'business', risk: 0.68 }
            ];

            const transactions = [
                { from: 'E1', to: 'E2', amount: 50000, timestamp: '2024-01-15', suspicious: true },
                { from: 'E2', to: 'E4', amount: 48500, timestamp: '2024-01-16', suspicious: true },
                { from: 'E4', to: 'E6', amount: 47000, timestamp: '2024-01-17', suspicious: true },
                { from: 'E3', to: 'E2', amount: 35000, timestamp: '2024-01-18', suspicious: true },
                { from: 'E5', to: 'E6', amount: 15000, timestamp: '2024-01-19', suspicious: false },
                { from: 'E6', to: 'E7', amount: 25000, timestamp: '2024-01-20', suspicious: true },
                { from: 'E7', to: 'E8', amount: 24000, timestamp: '2024-01-21', suspicious: true }
            ];

            return { entities, transactions };
        }

        function generateAnomalies() {
            return [
                {
                    id: 'A001',
                    type: 'Complex Layering Scheme',
                    severity: 'Critical',
                    riskScore: 0.93,
                    entities: ['E1', 'E2', 'E4', 'E6'],
                    totalAmount: 145500,
                    hops: 3,
                    description: 'Sophisticated fund layering through shell companies',
                    indicators: [
                        'Sequential transactions within 72 hours',
                        'Multiple shell company intermediaries',
                        'Amount decay pattern (2-3% per hop)',
                        'Cross-border entities involved'
                    ]
                },
                {
                    id: 'A002',
                    type: 'Smurfing Pattern',
                    severity: 'High',
                    riskScore: 0.78,
                    entities: ['E3', 'E2', 'E7', 'E8'],
                    totalAmount: 84000,
                    hops: 3,
                    description: 'Multiple deposits aggregated and moved to crypto',
                    indicators: [
                        'Multiple source accounts',
                        'Aggregation at intermediary',
                        'Final movement to crypto exchange',
                        'Amounts below reporting threshold'
                    ]
                },
                {
                    id: 'A003',
                    type: 'Round-Tripping',
                    severity: 'Medium',
                    riskScore: 0.65,
                    entities: ['E5', 'E6'],
                    totalAmount: 15000,
                    hops: 1,
                    description: 'Circular transaction pattern detected',
                    indicators: [
                        'Funds returning to origin',
                        'Minimal value change',
                        'Short time intervals'
                    ]
                }
            ];
        }

        function runAnalysis() {
            const btn = document.getElementById('runBtn');
            btn.disabled = true;
            btn.textContent = '‚è≥ Analyzing...';

            // Clear current state
            document.getElementById('anomalyList').innerHTML = '<div class="loading"><div class="spinner"></div><div>Running GNN analysis...</div></div>';
            document.getElementById('detailsPanel').innerHTML = '<div class="loading"><div class="spinner"></div><div>Processing...</div></div>';

            setTimeout(() => {
                // Generate data
                transactionGraph = generateData();
                anomalies = generateAnomalies();

                // Update stats
                document.getElementById('transactionCount').textContent = transactionGraph.transactions.length;
                document.getElementById('anomalyCount').textContent = anomalies.length;
                document.getElementById('entityCount').textContent = transactionGraph.entities.length;
                document.getElementById('riskLevel').textContent = 'HIGH';

                // Render anomalies
                renderAnomalies();

                // Select first anomaly
                if (anomalies.length > 0) {
                    selectAnomaly(anomalies[0]);
                }

                btn.disabled = false;
                btn.textContent = 'üîç Run Analysis';
            }, 1500);
        }

        function renderAnomalies() {
            const list = document.getElementById('anomalyList');
            list.innerHTML = '';

            anomalies.forEach(anomaly => {
                const card = document.createElement('div');
                card.className = 'anomaly-card';
                card.onclick = () => selectAnomaly(anomaly);
                
                card.innerHTML = `
                    <div class="anomaly-header">
                        <div class="anomaly-type">${anomaly.type}</div>
                        <div class="severity-badge severity-${anomaly.severity.toLowerCase()}">${anomaly.severity}</div>
                    </div>
                    <div class="anomaly-description">${anomaly.description}</div>
                    <div class="anomaly-footer">
                        <span class="amount">$${anomaly.totalAmount.toLocaleString()}</span>
                        <span class="risk-score">Risk: ${Math.round(anomaly.riskScore * 100)}%</span>
                    </div>
                `;
                
                list.appendChild(card);
            });
        }

        function selectAnomaly(anomaly) {
            selectedAnomaly = anomaly;
            
            // Update active state
            document.querySelectorAll('.anomaly-card').forEach((card, index) => {
                if (anomalies[index].id === anomaly.id) {
                    card.classList.add('active');
                } else {
                    card.classList.remove('active');
                }
            });

            // Render details
            renderDetails(anomaly);
        }

        function renderDetails(anomaly) {
            const panel = document.getElementById('detailsPanel');
            
            panel.innerHTML = `
                <div class="detail-section">
                    <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">${anomaly.type}</h2>
                    <p style="color: #94a3b8; margin-bottom: 1rem;">${anomaly.description}</p>
                    
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-label">Risk Score</div>
                            <div class="metric-value" style="color: #ef4444;">${Math.round(anomaly.riskScore * 100)}%</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Total Amount</div>
                            <div class="metric-value" style="color: #10b981;">$${anomaly.totalAmount.toLocaleString()}</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Hops</div>
                            <div class="metric-value" style="color: #3b82f6;">${anomaly.hops}</div>
                        </div>
                    </div>
                </div>

                <div class="detail-section">
                    <div class="detail-title">üéØ Detection Indicators</div>
                    <div class="indicator-list">
                        ${anomaly.indicators.map(ind => `<div class="indicator">‚Ä¢ ${ind}</div>`).join('')}
                    </div>
                </div>

                <div class="detail-section">
                    <div class="detail-title">üîó Involved Entities</div>
                    <div class="indicator-list">
                        ${anomaly.entities.map(entityId => {
                            const entity = transactionGraph.entities.find(e => e.id === entityId);
                            return entity ? `
                                <div class="indicator">
                                    <strong>${entity.name}</strong> - 
                                    Type: ${entity.type} | 
                                    Risk: ${Math.round(entity.risk * 100)}%
                                </div>
                            ` : '';
                        }).join('')}
                    </div>
                </div>

                <button class="export-btn" onclick="exportReport()">
                    üìä Export SAR Report
                </button>
            `;
        }

        function exportReport() {
            if (!selectedAnomaly) return;
            
            const report = `
ANTI-MONEY LAUNDERING CASE REPORT
=====================================
Case ID: ${selectedAnomaly.id}
Type: ${selectedAnomaly.type}
Severity: ${selectedAnomaly.severity}
Risk Score: ${Math.round(selectedAnomaly.riskScore * 100)}%
Total Amount: $${selectedAnomaly.totalAmount.toLocaleString()}

INDICATORS:
${selectedAnomaly.indicators.map(ind => '- ' + ind).join('\n')}

ENTITIES INVOLVED:
${selectedAnomaly.entities.join(', ')}

Generated: ${new Date().toLocaleString()}
System: AML Neural Monitor v3.2.1
            `;
            
            const blob = new Blob([report], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `SAR_Report_${selectedAnomaly.id}_${Date.now()}.txt`;
            a.click();
            window.URL.revokeObjectURL(url);
            
            alert('Report exported successfully!');
        }

        // Initialize on load
        window.addEventListener('load', () => {
            setTimeout(runAnalysis, 500);
        });
    </script>
</body>
</html>
